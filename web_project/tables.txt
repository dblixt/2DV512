CREATE TABLE Users
(
  id INT NOT NULL GENERATED ALWAYS AS IDENTITY,
  email VARCHAR(128) NOT NULL UNIQUE,
  password VARCHAR(128) NOT NULL,
  PRIMARY KEY(id)
);

CREATE TABLE Profiles
(
  user_id INT NOT NULL,
  name VARCHAR(128) NOT NULL,
  gender VARCHAR(10), 
  description VARCHAR(8192),
  pos_lng DOUBLE,
  pos_lat DOUBLE, 
  img VARCHAR(64),
  CONSTRAINT fk_user_id FOREIGN KEY(user_id) REFERENCES Users(id) ON DELETE RESTRICT,
  PRIMARY KEY(user_id)
);

CREATE TABLE Dogs 
(
  id INT NOT NULL GENERATED ALWAYS AS IDENTITY,
  user_id INT NOT NULL,
  name VARCHAR(128) NOT NULL,
  race VARCHAR(128) NOT NULL,
  age INT NOT NULL,
  gender VARCHAR(10), 
  img VARCHAR(64),
  CONSTRAINT fk_user_id FOREIGN KEY(user_id) REFERENCES Users(id) ON DELETE RESTRICT,
  PRIMARY KEY(id)
);

CREATE TABLE Events
(
  id INT NOT NULL GENERATED ALWAYS AS IDENTITY,
  user_id INT NOT NULL,
  date BIGINT NOT NULL,
  title VARCHAR(128),
  description VARCHAR(8192),
  pos_lng DOUBLE,
  pos_lat DOUBLE, 
  CONSTRAINT fk_user_id FOREIGN KEY(user_id) REFERENCES Users(id) ON DELETE RESTRICT,
  PRIMARY KEY(id)
);

CREATE TABLE Comments
(
  id INT NOT NULL GENERATED ALWAYS AS IDENTITY,
  user_id INT NOT NULL,
  event_id INT NOT NULL,
  date BIGINT NOT NULL,
  comment VARCHAR(8192),
  CONSTRAINT fk_user_id FOREIGN KEY(user_id) REFERENCES Users(id) ON DELETE RESTRICT,
  CONSTRAINT fk_event_id FOREIGN KEY(event_id) REFERENCES Events(id) ON DELETE RESTRICT,
  PRIMARY KEY(id)
);

CREATE TABLE EventJoins
(
  id INT NOT NULL GENERATED ALWAYS AS IDENTITY,
  user_id INT NOT NULL,
  event_id INT NOT NULL,
  date BIGINT NOT NULL,
  CONSTRAINT fk_event_id FOREIGN KEY(event_id) REFERENCES Events(id) ON DELETE RESTRICT,
  PRIMARY KEY(id)
);


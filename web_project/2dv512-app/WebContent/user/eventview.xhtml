<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">


<ui:composition template="/template/layoutUser.xhtml">
	<f:metadata>
		<f:viewParam name="id" value="#{eventViewController.id}" />
		<f:event type="preRenderView"
			listener="#{eventViewController.loadData}" />
	</f:metadata>

	<ui:define name="head">
		<title>TinderDogs - Event</title>
		<h:outputStylesheet name="entry.css" library="css" />
	</ui:define>


	<ui:define name="content">
		<h:form id="comment" name="comment">
			<div class="content-block">

				<h:graphicImage class="event-creator-img-right"
					value="/img/profile/#{eventViewController.profile.image}" />
				<div class="event-content">
					<h3 style="margin-top: 6px">#{eventViewController.event.title}</h3>
					<p class="event-creator">#{eventViewController.profile.name}</p>


					<div style="display: inline-block; margin-top: 12px;">
						<i class="material-icons"
							style="display: inline-block; font-size: 15px; vertical-align: middle; color: #323232;">near_me</i>
						<p
							style="display: inline; font-weight: bold; font-size: 14px; vertical-align: middle;">5
							km away</p>
					</div>

					<div style="display: inline-block; margin-left: 12px;">
						<i class="material-icons"
							style="display: inline-block; font-size: 15px; vertical-align: middle; color: #323232;">access_time</i>
						<p
							style="display: inline; font-weight: bold; font-size: 14px; vertical-align: middle;">

							<h:outputText value="#{eventViewController.event.date * 1000}"
								class="date">
								<f:convertDateTime pattern="YYYY-MM-dd HH:mm:ss" />
							</h:outputText>

						</p>
					</div>

					<p class="vspace">#{eventViewController.event.description}</p>
					<p style="margin-top: 20px;" />

					<h4>Dogs</h4>
					<p style="">
						<ui:repeat var="d" value="#{eventViewController.dogs}">
							<h:graphicImage class="event-dog-img" value="/img/dog/#{d.image}" />
						</ui:repeat>
					</p>



					<h4>Attendants</h4>
					<p style="">
						<ui:repeat var="p" value="#{eventViewController.profiles}">
							<h:graphicImage class="event-user-join-img"
								value="/img/dog/#{p.image}" />
						</ui:repeat>
					</p>


					<h4>Attendants</h4>
					<ul class="event-attendant-list">

						<ui:repeat var="p" value="#{eventViewController.profiles}">
							<h:graphicImage class="event-user-join-img"
								value="/img/dog/#{p.image}" />
						</ui:repeat>

						<li><a href="#" class="event-attendant"><img
								src="img/smith.jpg" /><span>Will Smith</span></a></li>
						<li><a href="#" class="event-attendant"><img
								src="img/alba.jpg" /><span>Jesscia Alba</span></a></li>
						<li><a href="#" class="event-attendant"><img
								src="img/bauer.jpg" /><span>Jack Bauer</span></a></li>
					</ul>


					<p style="margin-top: 20px;" />





					<h:commandLink class="icon-link"
						style="display: inline-block; margin-left: 5px;"
						action="#{eventViewController.joinEvent()}"
						rendered="#{eventViewController.event.joinStatus == 0 and !eventViewController.isOwnEvent()}">
						<f:ajax execute="@form" render="@form" />
						<i class="material-icons" style="font-size: 24px;">done</i>
						<span>Join</span>
					</h:commandLink>


					<ui:fragment
						rendered="#{eventViewController.event.joinStatus == 1}">
						<div class="icon-link"
							style="display: inline-block; margin-left: 5px; background: none;">
							<i class="material-icons">hourglass_empty</i><span>Join
								Requested</span>
						</div>
					</ui:fragment>


					<h:commandLink class="icon-link"
						style="display: inline-block; margin-left: 5px;"
						action="#{eventViewController.leaveEvent()}"
						rendered="#{eventViewController.event.joinStatus == 2}">

						<f:ajax execute="@form" render="@form" />
						<i class="material-icons" style="font-size: 24px;">clear</i>


						<span>Leave</span>
					</h:commandLink>




					<h:link class="icon-link"
						style="display: inline-block; margin-left: 5px;"
						outcome="editevent" rendered="#{eventViewController.isOwnEvent()}">
						<f:param name="id" value="#{e.id}" />
						<i class="material-icons">mode_edit</i>
						<span>Edit</span>
					</h:link>




				</div>
				<div class="clear" />



			</div>





			<ui:fragment
				rendered="#{eventViewController.event.joinStatus == 2 or eventViewController.isOwnEvent() }">

				<div class="content-block">

					<h2>Comments</h2>
					<h:panelGroup id="comment">
						<ui:repeat var="comment" value="#{eventViewController.comments}">


							<div class="event-comment-wrapper">

								<h:outputText class="event-comment-date" value="#{comment.date}">
									<f:convertDateTime pattern="yyyy. MM. dd. ' - ' HH:mm"
										timeZone="EST" type="date" />
								</h:outputText>

								<h:graphicImage class="event-comment-img"
									value="/img/profile/#{eventViewController.profile.image}" />

								<div class="event-comment-author">#{comment.userId}</div>
								<div class="event-comment">#{comment.comment}</div>
							</div>
							<div class="clear" />
						</ui:repeat>
					</h:panelGroup>


					<h:inputTextarea class="event-comment-input" rows="7"
						value="#{eventViewController.comment.comment}" />
					<br />

					<h:commandLink class="icon-link action-button"
						style="display: inline-block; margin-left: 5px;"
						action="#{eventViewController.saveData}">

						<i class="material-icons" style="font-size: 24px;">done</i>
						<span>Post</span>

						<f:ajax execute="@form" render="@form" resetValues="true" />
					</h:commandLink>

				</div>

			</ui:fragment>

		</h:form>



	</ui:define>

</ui:composition>
</html>